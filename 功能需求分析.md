# VoxType 功能需求分析

---

## 一、功能分类

```
┌─────────────────────────────────────────────────────────────┐
│                     功能分类总览                             │
├────────────────────────┬────────────────────────────────────┤
│       基本功能          │            增值功能                │
├────────────────────────┼────────────────────────────────────┤
│  • 语音转写核心能力      │  • AI 智能润色                     │
│  • 本地引擎支持         │  • 跨设备协同                       │
│  • 系统集成能力         │  • 云端扩展能力                     │
│  • 基础交互界面         │  • 高级管理功能                     │
│                        │  • 个性化定制                       │
└────────────────────────┴────────────────────────────────────┘
```

---

## 二、基本功能

2.1 实时语音转写

**功能定义**

实时语音转写是 VoxType 最核心的功能。用户通过按住或切换快捷键激活录音，系统实时捕获麦克风输入的音频流，并通过本地部署的 Whisper 模型将语音内容转换为文字。整个过程无需依赖网络连接，数据完全在本地处理，最大程度保护用户隐私。

**功能特点**

语音转写的实时性是用户体验的关键。系统设计目标是将从用户说完话到文字显示的延迟控制在 500 毫秒以内，这个响应速度能够让用户感受到近乎同步的转写体验，不会产生明显的等待感。同时，系统会实时显示转写进度，让用户随时了解当前状态。

在准确率方面，得益于 Whisper 模型的强大能力，系统在标准普通话和英语环境下的识别准确率超过 90%。对于中英文混杂的场景（这在技术人员、商务人士中非常常见），系统也能较好地处理语言切换，识别率可达 95% 以上。

**录音模式**

系统支持两种录音触发模式：

第一种是**按住录音模式**，用户按住快捷键时开始录音，松开即停止并自动转写。这种模式适合短句输入，操作直觉，是大多数用户的首选方式。

第二种是**切换录音模式**，用户按一次快捷键开始录音，再按一次停止。这种模式适合需要较长语音输入的场景，避免长时间按住按键的不适感。

### 2.2 本地 Whisper 引擎

**功能定义**

VoxType 集成了 whisper.cpp 作为本地语音识别引擎。whisper.cpp 是 OpenAI Whisper 模型的高性能 C/C++ 移植版本，针对 Apple Silicon 芯片进行了深度优化，充分利用 Metal GPU 加速能力，在保证识别质量的同时大幅提升处理速度。

**模型体系**

系统提供多个模型版本供用户选择，以适应不同的性能需求和使用场景：

**tiny 模型**是最轻量的选择，模型文件仅 75MB，运行时显存占用约 1GB。虽然精度相对较低，但响应速度极快，适合对实时性要求高、内容相对简单的场景，也是低配置设备的理想选择。免费版用户可以使用此模型。

**base 模型**在体积（142MB）和精度之间取得了较好的平衡，显存占用同样约 1GB。它是日常使用的入门级推荐选项，能够满足大多数普通用户的需求。免费版用户同样可以使用此模型。

这两个模型的免费开放，确保了所有用户都能获得完整可用的本地转写能力，而不是功能残缺的"试用版"体验。

**离线能力**

本地引擎的一大优势是完全离线可用。用户在没有网络连接的环境下（如飞机上、地铁中、信号不佳的会议室），依然可以正常使用语音转写功能。这对于需要随时随地记录想法的用户来说极为重要。

### 2.3 自动文本输入

**功能定义**

转写完成后，系统会自动将文字输入到当前光标所在位置。用户无需手动复制粘贴，实现了从"说"到"写"的无缝衔接。这种自动化的工作流大大提升了输入效率，让语音输入真正成为键盘输入的有效替代方案。

**输入模式**

系统支持两种文本输入方式：

**剪贴板模式**是默认方式，系统将转写文本写入剪贴板，然后模拟 Command+V 粘贴操作。这种方式兼容性最好，几乎在所有应用程序中都能正常工作，包括各种文本编辑器、聊天软件、网页表单等。

**模拟键盘模式**则逐字符模拟键盘输入。这种方式的优势是不会覆盖剪贴板中已有的内容，适合用户需要频繁使用剪贴板的场景。但由于是逐字符输入，速度相对较慢，且在某些特殊应用中可能存在兼容性问题。

用户可以根据自己的使用习惯在设置中选择默认的输入模式。

### 2.4 全局快捷键

**功能定义**

全局快捷键是连接用户与语音转写功能的桥梁。无论用户当前处于什么应用程序中，只要按下设定的快捷键，就能立即唤起录音功能。这种系统级的快捷键响应，让语音输入变得像切换输入法一样自然便捷。

**快捷键设计**

系统默认快捷键充分考虑了易用性和避免冲突两个因素。支持使用 Fn、Option、Control、Command 等修饰键的各种组合，用户可以根据个人习惯和其他软件的快捷键占用情况进行自定义设置。

快捷键的响应必须足够灵敏，从按下按键到录音界面出现的延迟应控制在 100 毫秒以内，给用户即时响应的感觉。同时，系统需要妥善处理快捷键冲突的情况，当检测到与其他应用的快捷键冲突时，应给予用户明确的提示和解决建议。

### 2.5 状态栏应用

**功能定义**

VoxType 作为一款工具类应用，采用状态栏常驻的方式存在于 macOS 系统中。用户无需打开主窗口，通过状态栏图标即可了解应用状态、快速访问常用功能，实现了"存在但不打扰"的设计理念。

**状态展示**

状态栏图标会根据当前状态动态变化：

- 空闲状态显示静态麦克风图标，表示应用已就绪
- 录音状态图标会有动画效果（如波纹或闪烁），直观表明正在录音
- 处理状态显示加载动画，告知用户转写正在进行
- 出错状态显示警告标识，提醒用户检查问题

**快捷菜单**

点击状态栏图标会弹出快捷菜单，提供以下功能入口：

- 显示最近一次转写的文本内容
- 快速切换录音模式（按住/切换）
- 快速选择 AI Prompt 模板
- 打开设置窗口
- 查看快捷键提示
- 退出应用

这种轻量级的交互设计，让用户在不离开当前工作的情况下完成大部分操作。

---

## 三、增值功能详述

增值功能代表了 VoxType 的进阶能力，通过 AI 智能处理、跨设备协同、云端扩展等特性，为用户提供更加强大和灵活的使用体验。这些功能作为 Pro 版本的核心卖点，满足专业用户和重度用户的深层需求。

### 3.1 AI 智能润色

**功能定义**

AI 润色功能是 VoxType 区别于传统语音转写工具的关键特性。语音转写的结果往往带有口语化特征——重复词、语气词、不完整的句子结构等。AI 润色功能利用大语言模型的能力，将这些口语化的原始转写自动优化为流畅、规范的书面文字。

**工作流程**

当用户启用 AI 润色功能后，转写完成后的文本会首先经过 AI 模型处理。AI 会根据用户选择的 Prompt 模板，对文本进行相应的优化处理。处理完成后，优化后的文本才会被输入到目标位置。整个过程对用户透明，只需一次语音输入，即可得到精炼的书面文字。

**Prompt 模板系统**

系统预设多种常用的润色模板，覆盖不同的使用场景：

**通用润色模板**会去除语气词（"嗯"、"那个"、"就是"等），修正语法错误，优化句子结构，使文本更加通顺易读。这是大多数场景的默认选择。

**正式文档模板**在通用润色的基础上，进一步提升文本的正式程度，使用更加书面化的表达，适合撰写工作邮件、报告、公文等场景。

**技术文档模板**针对开发者设计，会保留专业术语，规范代码相关的表述，适合编写代码注释、技术文档、Git Commit Message 等。

**社交媒体模板**则保持适度的亲和力和个性化，适合撰写微博、朋友圈、公众号文章等内容。

除了预设模板，用户还可以创建自定义 Prompt，实现完全个性化的文本处理逻辑。每个 Prompt 模板都可以绑定独立的快捷键，方便在不同场景之间快速切换。

### 3.2 跨设备麦克风

**功能定义**

跨设备麦克风功能让 iPhone 成为 Mac 的无线麦克风。在某些场景下，iPhone 的麦克风位置可能比 MacBook 内置麦克风更理想——比如 Mac 放在较远的位置、开会时需要放在桌子中央收音、或者环境噪音较大需要靠近声源等。通过这一功能，用户可以手持 iPhone 进行录音，而转写和输入都在 Mac 端完成。

**连接方式**

设备配对支持两种方式：

**二维码配对**是最简便的方式。Mac 端生成二维码，iPhone 打开 VoxType App 扫描即可完成配对。整个过程无需手动输入任何信息，几秒钟内即可完成。

**配对码配对**作为备选方案，适用于无法扫描二维码的情况。Mac 端显示 6 位数字配对码，用户在 iPhone 上手动输入即可。

配对成功后，只要两台设备处于同一 WiFi 网络下，就能自动重新连接，无需重复配对。

**技术实现**

系统采用 Bonjour 协议实现局域网内的自动设备发现，用户无需手动输入 IP 地址。音频传输使用 WebSocket 协议，通过 TLS 1.3 加密确保数据安全。音频数据采用 Opus 编码压缩，在保证音质的同时将带宽占用降至最低。

整个方案的设计目标是将音频传输延迟控制在 100 毫秒以内，让用户感受不到明显的延迟，获得接近本地录音的体验。

### 3.3 云端模型支持

**功能定义**

虽然本地模型能够满足大部分需求，但云端模型在某些方面有着明显的优势：更大的模型规模、更高的识别准确率、更强的语言理解能力等。云端模型支持功能让用户可以选择使用 OpenAI Whisper API、GPT-4o 等云端服务，获得最佳的识别和润色效果。

**配置方式**

用户需要自行获取相应云服务的 API Key，并在 VoxType 设置中进行配置。系统支持配置自定义 API Endpoint，这意味着用户可以使用兼容 OpenAI 接口的第三方服务，或者通过代理服务访问，满足不同网络环境和成本考虑的需求。

**安全考虑**

API Key 作为敏感信息，系统会使用 macOS Keychain 进行安全存储，不会以明文形式保存在配置文件中。用户也需要理解，使用云端模型意味着音频数据会被发送到第三方服务器处理，对隐私有严格要求的用户应继续使用本地模型。

**高级模型解锁**

Pro 版用户可以解锁所有本地 Whisper 模型，包括：

**small 模型**（466MB）是推荐的日常使用选项，在速度和精度之间取得了最佳平衡。

**medium 模型**（1.5GB）提供更高的识别精度，适合对准确率有较高要求的专业场景。

**large-v3 模型**（3.1GB）是专业级的选择，提供最高的识别精度，适合录音转录、字幕制作等对质量要求极高的场景。

**large-v3-turbo 模型**（1.6GB）是 Whisper 官方推出的优化版本，在接近 large 模型精度的同时大幅提升了推理速度，是速度与精度的最佳平衡点。

### 3.4 历史记录管理

**功能定义**

历史记录管理功能为用户保存所有的转写记录，让语音转写的内容不再是"用完即弃"。用户可以随时回顾过去的转写内容，进行搜索、分类、编辑和导出等操作。这对于需要追溯记录、整理内容的用户来说非常有价值。

**记录内容**

每条历史记录包含以下信息：

- 原始转写文本
- AI 润色后的文本（如果启用了润色功能）
- 录音时长
- 创建时间
- 来源设备（Mac 本地或 iPhone 远程）
- 使用的模型和 Prompt
- 原始音频文件（可选保存）

**分类体系**

系统将历史记录自动分为以下几个类别：

**全部记录**展示所有转写历史，按时间倒序排列。

**听写记录**是通过快捷键触发的实时语音输入，通常是较短的内容片段。

**文件转录**是通过导入音视频文件产生的转写记录，通常是较长的完整内容。

**语音日记**是一个特殊类别，用户可以将某些记录标记为日记，方便后续整理个人想法和灵感。

**搜索能力**

历史记录支持全文搜索，用户可以通过关键词快速定位到相关记录。搜索支持中英文混合输入，会同时匹配原始文本和润色后的文本。

### 3.5 文件批量转录

**功能定义**

除了实时语音输入，VoxType 还支持导入现有的音视频文件进行转录。用户可以将会议录音、播客音频、视频素材等拖拽到应用中，批量生成文字稿。这一功能将 VoxType 的使用场景从"输入工具"扩展到"转录工具"。

**支持格式**

系统支持常见的音视频格式，包括：

- 音频：MP3、WAV、M4A、FLAC、AAC、OGG
- 视频：MP4、MOV、MKV、AVI、WebM

对于视频文件，系统会自动提取音轨进行转录，无需用户手动转换格式。

**批量处理**

用户可以一次性导入多个文件，系统会创建一个转录队列，按顺序依次处理。在处理过程中，用户可以查看每个文件的进度，也可以取消或调整队列顺序。转录完成后，结果会自动保存到历史记录中。

**长音频优化**

对于较长的音频文件（如几个小时的会议录音），系统会自动进行分段处理，避免内存溢出。分段之间会有适当的重叠，确保不会遗漏内容。最终输出时，各分段会被合并为完整的文稿。

### 3.6 iCloud 同步

**功能定义**

对于同时使用多台苹果设备的用户，iCloud 同步功能确保配置和数据在所有设备间保持一致。无论是在 iMac 上设置的 Prompt 模板，还是在 MacBook 上保存的历史记录，都能自动同步到其他设备。

**同步内容**

系统会同步以下内容：

- 用户设置和偏好配置
- 自定义 AI Prompt 模板
- 词替换规则
- 历史记录（可选）

用户可以在设置中选择是否同步历史记录。考虑到隐私因素，部分用户可能希望历史记录仅保留在本地。

**同步策略**

不同类型的数据采用不同的同步机制：

用户设置、Prompt 模板、词替换规则等小型配置数据，使用 iCloud Key-Value Store 即时同步，几乎没有延迟。

历史记录等较大的数据使用 iCloud CloudKit，采用增量同步策略，定期（约 5 分钟）将新增内容上传到云端。这种设计在同步及时性和系统资源占用之间取得平衡。

### 3.7 多语言支持

**功能定义**

Whisper 模型天生支持多种语言的识别，VoxType 将这一能力充分释放给用户。系统可以自动检测语音中的语言类型，无需用户手动切换设置。这对于经常使用多种语言的用户（如翻译人员、国际业务人员、语言学习者）来说非常便利。

**支持语言**

系统支持 Whisper 模型能够识别的所有语言，主要包括：

- 中文（简体、繁体）
- 英语
- 日语
- 韩语
- 法语、德语、西班牙语等主要欧洲语言
- 以及其他数十种语言

**混合语言处理**

Whisper 模型的一大特点是对语言切换的鲁棒处理。在一段语音中混合使用中文和英文时，系统能够准确识别并正确输出，这对于技术人员、商务人士等经常需要中英混用的群体尤为重要。

### 3.8 词替换规则

**功能定义**

词替换规则功能允许用户定义自动替换映射表。当转写结果中出现特定词汇时，系统会自动替换为用户指定的内容。这个功能可以用于纠正常见的误识别、统一术语表达、或者实现某些特殊的文本处理需求。

**使用场景**

**纠正误识别**：某些人名、品牌名、专业术语容易被误识别为常见词汇，通过替换规则可以自动纠正。例如将"苹果手机"自动替换为"iPhone"。

**统一术语**：团队协作时可能需要使用统一的术语表达，替换规则可以确保语音输入的内容符合团队规范。

**缩写展开**：将常用的缩写词自动展开为完整表达，如"PR"替换为"Pull Request"。

**规则配置**

系统支持两种匹配模式：

**精确匹配**仅当出现完全一致的词汇时才触发替换，适合处理特定词汇。

**正则表达式匹配**支持使用正则表达式定义复杂的匹配规则，适合处理有规律的批量替换需求。

每条规则可以单独启用或禁用，方便用户根据不同场景灵活管理。

### 3.9 界面个性化

**功能定义**

VoxType 提供多种界面显示模式和主题设置，让用户可以根据自己的审美偏好和使用习惯定制应用外观。

**显示模式**

**面板模式**会在屏幕上显示一个悬浮窗口，展示录音状态和实时转写内容。窗口位置可以自由拖动，大小可以调整，适合需要查看转写过程的用户。

**刘海模式**是一种更加简约的显示方式，录音状态和基本信息直接显示在菜单栏附近，不会遮挡屏幕内容，适合追求简洁、不希望被打扰的用户。

**主题设置**

系统支持浅色和深色两种主题，默认跟随 macOS 系统设置自动切换。用户也可以强制指定使用某一主题。

### 3.10 触控板反馈

**功能定义**

在支持触觉反馈的设备上（主要是配备 Force Touch 触控板的 MacBook），VoxType 可以在特定操作时提供触觉反馈，增强操作的确认感。

**反馈时机**

系统在以下时刻提供触觉反馈：

- 开始录音时：轻微震动提示录音已开始
- 停止录音时：不同的震动模式表示录音已结束
- 转写完成时：确认震动表示文字已输入

这种多感官的反馈机制，让用户即使不看屏幕也能感知操作状态，对于盲打或同时处理其他事务的用户特别有帮助。

### 3.11 数据导出

**功能定义**

用户的历史记录和转录内容是有价值的数据资产。导出功能允许用户将这些数据导出为通用格式，用于备份、迁移、或在其他应用中使用。

**导出格式**

**TXT 格式**是最简单的纯文本格式，通用性最强，适合在任何文本编辑器中查看。

**Markdown 格式**保留一定的结构信息（如时间戳、分段），适合在支持 Markdown 的应用中进一步编辑。

**JSON 格式**导出完整的结构化数据，包含所有元信息，适合程序化处理或导入其他系统。

用户可以选择导出全部记录或仅导出选中的部分记录，也可以按时间范围筛选导出内容。

---

## 四、功能与版本对照

下表清晰展示各功能在免费版与 Pro 版中的可用性：

| 功能分类           | 具体功能                | 免费版 | Pro 版  |
| ------------------ | ----------------------- | ------ | ------- |
| **语音转写** | 实时语音转写            | ✅     | ✅      |
|                    | tiny/base 模型          | ✅     | ✅      |
|                    | small/medium/large 模型 | ❌     | ✅      |
| **系统集成** | 全局快捷键              | ✅     | ✅      |
|                    | 状态栏应用              | ✅     | ✅      |
|                    | 自动文本输入            | ✅     | ✅      |
| **AI 增强**  | AI 智能润色             | ❌     | ✅      |
|                    | 自定义 Prompt 模板      | ❌     | ✅      |
|                    | 云端模型支持            | ❌     | ✅      |
| **跨设备**   | iPhone 无线麦克风       | ❌     | ✅      |
|                    | iCloud 配置同步         | ❌     | ✅      |
| **数据管理** | 历史记录管理            | 有限   | ✅ 无限 |
|                    | 文件批量转录            | ❌     | ✅      |
|                    | 数据导出                | ❌     | ✅      |
| **个性化**   | 多语言支持              | 基础   | ✅ 完整 |
|                    | 词替换规则              | ❌     | ✅      |
|                    | 界面主题/模式           | 基础   | ✅ 完整 |
|                    | 触控板反馈              | ❌     | ✅      |

---

## 五、总结

VoxType 的功能设计遵循"核心免费、增值付费"的策略。基本功能确保每个用户都能获得完整可用的本地语音转写能力，这是产品的立身之本；增值功能则通过 AI 润色、跨设备协同、云端扩展等高级能力，为愿意付费的用户提供显著提升的使用体验。

这种功能分层设计，既能让产品快速触达大量用户、建立口碑，又能通过差异化的增值服务实现商业变现，是一种可持续的产品发展路径。

---
